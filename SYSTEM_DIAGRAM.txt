╔═══════════════════════════════════════════════════════════════════╗
║                   CUSTOM KNOWLEDGE BASE SYSTEM                    ║
╚═══════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────┐
│                         USER INTERFACE                          │
│                      (Browser - Port 8080)                      │
└────────────────────────┬────────────────────────────────────────┘
                         │
        ┌────────────────┼────────────────┐
        │                │                │
        ▼                ▼                ▼
   ┌─────────┐    ┌──────────┐    ┌──────────┐
   │  LOGIN  │    │  EDITOR  │    │  GRAPH   │
   │  admin  │    │CodeMirror│    │Force-D3  │
   └─────────┘    └──────────┘    └──────────┘
        │                │                │
        └────────────────┼────────────────┘
                         │
              HTTP Basic Auth + CORS
                         │
┌────────────────────────┴────────────────────────────────────────┐
│                    FRONTEND (React + Vite)                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ Components:                                               │  │
│  │  • Layout.tsx    - Main app structure                    │  │
│  │  • FileTree.tsx  - Sidebar navigation                    │  │
│  │  • Editor.tsx    - CodeMirror 6 editor                   │  │
│  │  • Preview.tsx   - Markdown rendering                    │  │
│  │  • Graph.tsx     - Force-directed graph                  │  │
│  │  • Login.tsx     - Authentication form                   │  │
│  └──────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ State (Zustand):                                          │  │
│  │  • files[]       - File list                             │  │
│  │  • currentFile   - Active file                           │  │
│  │  • graph         - Graph data                            │  │
│  │  • authenticated - Login state                           │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────┬────────────────────────────────────────┘
                         │
                   RESTful API
                         │
┌────────────────────────┴────────────────────────────────────────┐
│                     BACKEND (Go + Chi)                          │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ Middleware:                                               │  │
│  │  • BasicAuth     - Authentication                        │  │
│  │  • CORS          - Cross-origin                          │  │
│  │  • Logger        - Request logging                       │  │
│  │  • Recoverer     - Panic recovery                        │  │
│  └──────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ API Endpoints:                                            │  │
│  │  GET    /api/files           - List all files            │  │
│  │  GET    /api/files/*path     - Read file                 │  │
│  │  PUT    /api/files/*path     - Update file               │  │
│  │  DELETE /api/files/*path     - Delete file               │  │
│  │  GET    /api/graph           - Get graph data            │  │
│  │  GET    /api/backlinks/*     - Get backlinks             │  │
│  │  GET    /api/search?q=       - Search files              │  │
│  └──────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ Graph Builder:                                            │  │
│  │  • Scan vault directory                                  │  │
│  │  • Parse wikilinks [[note]] and [[/folder/]]             │  │
│  │  • Build node list (files + directories)                 │  │
│  │  • Build edge list (links between nodes)                 │  │
│  │  • Cache in memory                                       │  │
│  │  • Rebuild on file changes                               │  │
│  └──────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ Markdown Parser:                                          │  │
│  │  • Goldmark (CommonMark)                                 │  │
│  │  • Wikilink extension                                    │  │
│  │  • GFM (tables, strikethrough)                           │  │
│  │  • HTML output                                           │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────┬────────────────────────────────────────┘
                         │
                   File System I/O
                         │
┌────────────────────────┴────────────────────────────────────────┐
│                        STORAGE (vault/)                         │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ Markdown Files:                                           │  │
│  │  vault/                                                   │  │
│  │  ├── index.md                                             │  │
│  │  ├── notes/                                               │  │
│  │  │   ├── getting-started.md                              │  │
│  │  │   └── syntax-guide.md                                 │  │
│  │  └── projects/                                            │  │
│  │      └── example-project.md                               │  │
│  └──────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ Wikilink Examples:                                        │  │
│  │  • [[note]]           → links to note.md                 │  │
│  │  • [[folder/note]]    → links to folder/note.md          │  │
│  │  • [[/projects/]]     → links to directory (blue node)   │  │
│  │  • [[note|alias]]     → link with custom text            │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                       DEPLOYMENT OPTIONS                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. DIRECT:                                                     │
│     ./start.sh  →  Single server on :8080                      │
│                                                                 │
│  2. DOCKER:                                                     │
│     docker-compose up  →  Containerized on :8080               │
│                                                                 │
│  3. DEVELOPMENT:                                                │
│     ./dev.sh  →  Backend :8080 + Frontend :5173 (hot reload)   │
│                                                                 │
│  4. MAKE:                                                       │
│     make build && make start  →  Automated build + start       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                          DATA FLOW                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  User Action → Frontend → API Request → Backend Handler        │
│       ↑                                       ↓                 │
│       │                                   File System           │
│       │                                       ↓                 │
│       │                                  Graph Rebuild          │
│       │                                       ↓                 │
│       └─────────── JSON Response ←────── Response               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                       GRAPH STRUCTURE                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ○ index.md                                                    │
│   │                                                             │
│   ├──→ ○ notes/getting-started.md                              │
│   │    │                                                        │
│   │    └──→ ○ notes/syntax-guide.md                            │
│   │                                                             │
│   ├──→ ■ notes/          (directory node - BLUE)               │
│   │                                                             │
│   └──→ ■ projects/       (directory node - BLUE)               │
│        │                                                        │
│        └──→ ○ projects/example-project.md                      │
│                                                                 │
│   Legend:                                                       │
│   ○ = File node (gray circle)                                  │
│   ■ = Directory node (blue square) ⭐ UNIQUE FEATURE           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      TECHNOLOGY STACK                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Backend:                  Frontend:                            │
│  • Go 1.22                 • React 18                           │
│  • Chi Router              • TypeScript                         │
│  • Goldmark                • Vite                               │
│  • fsnotify                • CodeMirror 6                       │
│  • HTTP Basic Auth         • react-force-graph-2d               │
│                            • KaTeX (LaTeX)                      │
│  Storage:                  • Mermaid (Diagrams)                 │
│  • File System             • Zustand (State)                    │
│  • In-Memory Cache         • Tailwind CSS                       │
│  • No Database             • shadcn/ui                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      PERFORMANCE METRICS                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  • Memory Usage:     50-100 MB  (vs Obsidian 300-500 MB)       │
│  • Bundle Size:      ~2 MB      (vs Obsidian 100+ MB)          │
│  • Startup Time:     <1 second                                 │
│  • Graph Rebuild:    ~100 ms    (for 1000 files)               │
│  • API Response:     <50 ms                                    │
│  • Graph Rendering:  60 FPS     (up to 500 nodes)              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════
                        STATUS: ✅ COMPLETE
═══════════════════════════════════════════════════════════════════
