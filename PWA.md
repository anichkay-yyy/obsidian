# PWA Implementation —Å @anichkay/pwa-lib

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üì± Progressive Web App
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **@anichkay/pwa-lib**.

### üé® –ò–∫–æ–Ω–∫–∏ (13 —Ä–∞–∑–º–µ—Ä–æ–≤)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ –æ–¥–Ω–æ–π –∏–∫–æ–Ω–∫–∏ 512x512:**

| –†–∞–∑–º–µ—Ä | –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------|------------|
| 16x16 | icon-16.png | Favicon |
| 32x32 | icon-32.png | Favicon |
| 48x48 | icon-48.png | Favicon |
| 72x72 | icon-72.png | Android badge |
| 96x96 | icon-96.png | Android |
| 128x128 | icon-128.png | Android |
| 144x144 | icon-144.png | Android |
| 152x152 | icon-152.png | iOS |
| 180x180 | apple-touch-icon.png | Apple Touch Icon |
| 192x192 | icon-192.png | Android / Manifest |
| 384x384 | icon-384.png | Android |
| 512x512 | icon-512.png | Splash screen |
| 512x512 | icon-512-maskable.png | Maskable (safe zone) |
| multi | favicon.ico | ICO (16+32+48) |

**–í—Å–µ–≥–æ:** 156 KB

### üìÑ Web App Manifest

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
{
  "name": "Knowledge Base",
  "short_name": "KB",
  "description": "Lightweight self-hosted knowledge base...",
  "theme_color": "#0C0F16",
  "background_color": "#000000",
  "display": "standalone",
  "start_url": "/",
  "scope": "/",
  "lang": "en",
  "orientation": "any"
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω
- ‚úÖ Standalone —Ä–µ–∂–∏–º (–±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ UI)
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–º–∞ (#0C0F16)
- ‚úÖ Splash screen –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ 13 –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫

### ‚öôÔ∏è Service Worker

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SW —Å:**

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **API –∑–∞–ø—Ä–æ—Å—ã** - `NetworkFirst`
   - –°–Ω–∞—á–∞–ª–∞ —Å–µ—Ç—å, fallback –Ω–∞ –∫—ç—à
   - TTL: 5 –º–∏–Ω—É—Ç
   - –ö—ç—à: `api-cache`

2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - `CacheFirst`
   - –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –∫—ç—à
   - TTL: 30 –¥–Ω–µ–π
   - –õ–∏–º–∏—Ç: 100 —Ñ–∞–π–ª–æ–≤
   - –ö—ç—à: `images`

3. **–®—Ä–∏—Ñ—Ç—ã** - `CacheFirst`
   - –û—á–µ–Ω—å –¥–æ–ª–≥–∏–π –∫—ç—à
   - TTL: 1 –≥–æ–¥
   - –ö—ç—à: `fonts`

4. **CSS/JS** - `StaleWhileRevalidate`
   - –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–∑ –∫—ç—à–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ñ–æ–Ω–µ
   - –õ–∏–º–∏—Ç: 50 —Ñ–∞–π–ª–æ–≤
   - –ö—ç—à: `static`

5. **HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - `NetworkFirst`
   - –°–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
   - TTL: 1 —á–∞—Å
   - –ö—ç—à: `pages`

**Precache:**
- `index.html`
- –í—Å–µ CSS –∏ JS –∏–∑ `/assets/`
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è offline

**Lifecycle:**
- `install` - skipWaiting() –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- `activate` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫—ç—à–µ–π
- `fetch` - —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ URL-–ø–∞—Ç—Ç–µ—Ä–Ω–∞–º

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
cd frontend

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PWA —Ä–µ—Å—É—Ä—Å–æ–≤
npm run pwa:generate

# Watch mode (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
npm run pwa:dev

# –û–±—ã—á–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev
```

### Production

```bash
# –°–æ–±—Ä–∞—Ç—å –≤—Å—ë
npm run build

# PWA —Ä–µ—Å—É—Ä—Å—ã —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ dist/
```

## üì± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ PWA

### iOS (Safari)

1. –û—Ç–∫—Ä—ã—Ç—å –≤ Safari
2. –ù–∞–∂–∞—Ç—å "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" (–∫–≤–∞–¥—Ä–∞—Ç —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π)
3. –í—ã–±—Ä–∞—Ç—å "–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"
4. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò–∫–æ–Ω–∫–∞ –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º —ç–∫—Ä–∞–Ω–µ
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- –ë–µ–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- –ö–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### Android (Chrome)

1. –û—Ç–∫—Ä—ã—Ç—å –≤ Chrome
2. –ú–µ–Ω—é ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å

**–ò–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- Chrome –ø–æ–∫–∞–∂–µ—Ç –±–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π

### Desktop (Chrome, Edge)

1. –ê–¥—Ä–µ—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Üí –∏–∫–æ–Ω–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (‚ûï)
2. "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–¥–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–µ–Ω—é –ü—É—Å–∫ / Dock
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### pwa.config.ts

```typescript
import { defineConfig } from '@anichkay/pwa-lib/config'

export default defineConfig({
  // –ò—Å—Ö–æ–¥–Ω–∞—è –∏–∫–æ–Ω–∫–∞ (>= 512x512)
  icon: './public/icon-512.png',

  // –í—ã—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
  outDir: './public/icons',

  // Manifest
  manifest: {
    name: 'Knowledge Base',
    short_name: 'KB',
    theme_color: '#0C0F16',
    background_color: '#000000',
    // ...
  },

  // Service Worker
  sw: {
    output: './public/sw.js',
    precache: ['./public/index.html', ...],
    routes: [
      { match: '/api/**', strategy: 'NetworkFirst', ... },
      // ...
    ],
  },

  // Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ—Ç–∫–ª—é—á–µ–Ω—ã)
  notifications: {
    enabled: false,
  },
})
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏

```bash
# 1. –ó–∞–º–µ–Ω–∏—Ç—å source-icon.svg –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é PNG 512x512
convert new-icon.svg -resize 512x512 public/icon-512.png

# 2. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë
npm run pwa:generate

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
npm run build
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `pwa.config.ts`:

```typescript
sw: {
  routes: [
    // –ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
    {
      match: '/my-api/**',
      strategy: 'CacheFirst',
      cache: 'my-cache',
      maxAge: 3600, // 1 —á–∞—Å
    },
    // ...
  ],
}
```

–ó–∞—Ç–µ–º:
```bash
npm run pwa:generate
npm run build
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ PWA

### Chrome DevTools

1. F12 ‚Üí –≤–∫–ª–∞–¥–∫–∞ "Application"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - **Manifest** - –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
   - **Service Workers** - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
   - **Cache Storage** - —Å–æ–∑–¥–∞–Ω—ã –∫—ç—à–∏
   - **Icons** - –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã

### Lighthouse

1. F12 ‚Üí –≤–∫–ª–∞–¥–∫–∞ "Lighthouse"
2. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: PWA + Performance
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑

**–¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- PWA: 100/100 ‚úÖ
- Performance: >90
- Installable: ‚úÖ
- Offline ready: ‚úÖ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ offline

1. DevTools ‚Üí Application ‚Üí Service Workers
2. –í–∫–ª—é—á–∏—Ç—å "Offline"
3. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –∫—ç—à–∞

## üìä Service Worker —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### CacheFirst
```
–ó–∞–ø—Ä–æ—Å ‚Üí –ö—ç—à –µ—Å—Ç—å? ‚Üí –î–∞ ‚Üí –û—Ç–≤–µ—Ç –∏–∑ –∫—ç—à–∞
                   ‚Üí –ù–µ—Ç ‚Üí –°–µ—Ç—å ‚Üí –ö—ç—à ‚Üí –û—Ç–≤–µ—Ç
```
**–î–ª—è:** –∫–∞—Ä—Ç–∏–Ω–∫–∏, —à—Ä–∏—Ñ—Ç—ã, —Å—Ç–∞—Ç–∏–∫–∞

### NetworkFirst
```
–ó–∞–ø—Ä–æ—Å ‚Üí –°–µ—Ç—å (3—Å) ‚Üí –£—Å–ø–µ—Ö ‚Üí –ö—ç—à ‚Üí –û—Ç–≤–µ—Ç
                    ‚Üí –û—à–∏–±–∫–∞ ‚Üí –ö—ç—à –µ—Å—Ç—å? ‚Üí –û—Ç–≤–µ—Ç –∏–∑ –∫—ç—à–∞
```
**–î–ª—è:** API, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç

### StaleWhileRevalidate
```
–ó–∞–ø—Ä–æ—Å ‚Üí –ö—ç—à –µ—Å—Ç—å? ‚Üí –û—Ç–≤–µ—Ç –∏–∑ –∫—ç—à–∞
                   ‚Üí –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Å–µ—Ç–∏
```
**–î–ª—è:** HTML, –Ω–µ-–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### NetworkOnly
```
–ó–∞–ø—Ä–æ—Å ‚Üí –°–µ—Ç—å ‚Üí –û—Ç–≤–µ—Ç
```
**–î–ª—è:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø–ª–∞—Ç–µ–∂–∏

### CacheOnly
```
–ó–∞–ø—Ä–æ—Å ‚Üí –ö—ç—à ‚Üí –û—Ç–≤–µ—Ç
```
**–î–ª—è:** precached —Ä–µ—Å—É—Ä—Å—ã

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ pwa-lib

### CLI –∫–æ–º–∞–Ω–¥—ã

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
pwa-lib init

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ–≥–æ (–∏–∫–æ–Ω–∫–∏ + manifest + SW)
pwa-lib generate

# –¢–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏
pwa-lib icons --input icon.png --output ./public/icons

# Watch mode
pwa-lib dev
```

### –ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è

**–ò–∑ –æ–¥–Ω–æ–π –∏–∫–æ–Ω–∫–∏:**
- 13 PNG —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
- 1 maskable –∏–∫–æ–Ω–∫–∞ (safe zone)
- 1 favicon.ico (3 —Ä–∞–∑–º–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏)
- Apple Touch Icon

**Manifest:**
- –ü–æ–ª–Ω—ã–π Web App Manifest
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏ –∫ –∏–∫–æ–Ω–∫–∞–º
- –ó–Ω–∞—á–µ–Ω–∏—è –∏–∑ package.json

**Service Worker:**
- –ì–æ—Ç–æ–≤—ã–π SW –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- Precache –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üîê –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SW

–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

1. –ù–æ–≤—ã–π SW —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
2. –ü—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è prompt:
   ```
   "New version available! Reload to update?"
   ```
3. –ü—Ä–∏ —Å–æ–≥–ª–∞—Å–∏–∏ - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è

### –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```typescript
// src/registerSW.ts
registration.addEventListener('updatefound', () => {
  // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
})
```

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**PWA + Responsive design:**
- ‚úÖ Touch-friendly UI
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π viewport
- ‚úÖ Safe zone –¥–ª—è maskable –∏–∫–æ–Ω–æ–∫
- ‚úÖ Splash screen –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üåê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤

| –ë—Ä–∞—É–∑–µ—Ä | PWA | SW | Install |
|---------|-----|-------|---------|
| Chrome 89+ | ‚úÖ | ‚úÖ | ‚úÖ |
| Edge 89+ | ‚úÖ | ‚úÖ | ‚úÖ |
| Safari 15+ | ‚úÖ | ‚úÖ | ‚úÖ |
| Firefox 90+ | ‚úÖ | ‚úÖ | ‚ùå |
| Samsung Internet | ‚úÖ | ‚úÖ | ‚úÖ |

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### pwa-lib –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

```typescript
import { registerSW, notifications } from '@anichkay/pwa-lib/client'

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è SW —Å –∫–æ–ª–±—ç–∫–∞–º–∏
const reg = await registerSW('/sw.js', {
  onUpdate: (reg) => console.log('Update available'),
  onReady: (reg) => console.log('SW ready'),
  onError: (err) => console.error('SW error', err),
})

// Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
if (notifications.isSupported()) {
  await notifications.requestPermission()
  const sub = await notifications.subscribe({ ... })
}
```

### Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å:

```typescript
// pwa.config.ts
notifications: {
  enabled: true,
  serverUrl: 'https://push.example.com',
  appId: 'my-app',
  apiKey: 'key',
}
```

–ó–∞—Ç–µ–º –≤ –∫–ª–∏–µ–Ω—Ç–µ:

```typescript
import { createPushClient } from '@anichkay/pwa-lib/client'

const push = createPushClient()
await push.subscribe()
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ PWA:**
- ‚úÖ 13 –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π manifest
- ‚úÖ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π Service Worker
- ‚úÖ Offline-ready
- ‚úÖ Installable
- ‚úÖ Fast caching
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- @anichkay/pwa-lib - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PWA
- sharp - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Service Worker API
- Cache Storage API
- Web App Manifest

**–†–∞–∑–º–µ—Ä:**
- –ò–∫–æ–Ω–∫–∏: ~156 KB
- SW: ~8 KB
- Manifest: <1 KB

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **Production-ready PWA**
**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** [@anichkay/pwa-lib](https://www.npmjs.com/package/@anichkay/pwa-lib) v0.6.1
**Lighthouse PWA Score:** 100/100 ‚úÖ
